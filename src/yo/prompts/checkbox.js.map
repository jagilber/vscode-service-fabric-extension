{"version":3,"file":"checkbox.js","sourceRoot":"","sources":["../../../yo/prompts/checkbox.ts"],"names":[],"mappings":";;AAAA,mCAAiE;AACjE,qCAA8B;AAC9B,8DAAuD;AACvD,MAAM,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AAEnC,MAAqB,cAAe,SAAQ,gBAAM;IAEjD,YAAY,QAAa;QACxB,QAAQ,CAAC,OAAO,GAAG,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;YAChD,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;gBAC/B,OAAO;oBACN,IAAI,EAAE,MAAM;oBACZ,KAAK,EAAE,MAAM;iBACb,CAAC;aACF;YAED,OAAO,MAAM,CAAC;QACf,CAAC,CAAC,CAAC;QAEH,KAAK,CAAC,QAAQ,CAAC,CAAC;IACjB,CAAC;IAEM,MAAM;QACZ,IAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,MAAM,EAAE,EAAE;YAC9D,MAAM,CAAC,GAAG,MAAM,CAAC,OAAO,KAAK,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,IAAI,MAAM,CAAC,IAAI,EAAE,CAAC,GAAG,MAAM,CAAC;YAClG,OAAO,MAAM,CAAC;QACf,CAAC,EAAE,EAAE,CAAC,CAAC;QAEP,MAAM,OAAO,GAAqB;YACjC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO;SACnC,CAAC;QAEF,IAAI,gBAAgB,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC5C,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAEpC,OAAO,eAAM,CAAC,aAAa,CAAC,gBAAgB,EAAE,OAAO,CAAC;aACpD,IAAI,CAAC,MAAM,CAAC,EAAE;YACd,IAAI,MAAM,KAAK,SAAS,EAAE;gBACzB,MAAM,IAAI,yBAAe,EAAE,CAAC;aAC5B;YAED,IAAI,MAAM,KAAK,OAAO,CAAC,IAAI,EAAE;gBAC5B,OAAO,CAAC,MAAM,CAAC,CAAC,OAAO,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC;gBAEnD,OAAO,IAAI,CAAC,MAAM,EAAE,CAAC;aACrB;YAED,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,MAAM,EAAE,EAAE;gBACvD,IAAI,MAAM,CAAC,OAAO,KAAK,IAAI,EAAE;oBAC5B,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;iBAC1B;gBAED,OAAO,MAAM,CAAC;YACf,CAAC,EAAE,EAAE,CAAC,CAAC;QACR,CAAC,CAAC,CAAC;IACL,CAAC;CACD;AAnDD,iCAmDC","sourcesContent":["import { window, QuickPickItem, QuickPickOptions } from 'vscode';\r\nimport Prompt from './prompt';\r\nimport EscapeException from '../utils/EscapeException';\r\nconst figures = require('figures');\r\n\r\nexport default class CheckboxPrompt extends Prompt {\r\n\r\n\tconstructor(question: any) {\r\n\t\tquestion.choices = question.choices.map(choice => {\r\n\t\t\tif (typeof choice === 'string') {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: choice,\r\n\t\t\t\t\tvalue: choice\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\treturn choice;\r\n\t\t});\r\n\r\n\t\tsuper(question);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tlet choices = this._question.choices.reduce((result, choice) => {\r\n\t\t\tresult[`${choice.checked === true ? figures.radioOn : figures.radioOff} ${choice.name}`] = choice;\r\n\t\t\treturn result;\r\n\t\t}, {});\r\n\r\n\t\tconst options: QuickPickOptions = {\r\n\t\t\tplaceHolder: this._question.message\r\n\t\t};\r\n\r\n\t\tlet quickPickOptions = Object.keys(choices);\r\n\t\tquickPickOptions.push(figures.tick);\r\n\r\n\t\treturn window.showQuickPick(quickPickOptions, options)\r\n\t\t\t.then(result => {\r\n\t\t\t\tif (result === undefined) {\r\n\t\t\t\t\tthrow new EscapeException();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (result !== figures.tick) {\r\n\t\t\t\t\tchoices[result].checked = !choices[result].checked;\r\n\r\n\t\t\t\t\treturn this.render();\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this._question.choices.reduce((result, choice) => {\r\n\t\t\t\t\tif (choice.checked === true) {\r\n\t\t\t\t\t\tresult.push(choice.value);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}, []);\r\n\t\t\t});\r\n\t}\r\n}\r\n"]}