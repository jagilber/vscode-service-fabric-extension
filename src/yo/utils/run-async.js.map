{"version":3,"file":"run-async.js","sourceRoot":"","sources":["../../../yo/utils/run-async.ts"],"names":[],"mappings":";;AAAA,mCAAgC;AAChC,MAAM,QAAQ,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AACtC,MAAM,IAAI,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;AAE9B,+EAA+E;AAC/E,mBAAwB,IAAI;IAC3B,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;QAChB,OAAO;YACN,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAC9B,CAAC,CAAA;KACD;IAED,MAAM,EAAE,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;IAE1B,OAAO;QACN,MAAM,IAAI,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAEnD,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;YACtC,OAAO,CAAC,OAAO,CAAC,eAAM,CAAC,aAAa,CAAC,IAAI,OAAO,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;gBAC7D,EAAE,CAAC,KAAK,CAAC,EAAE,EAAE,IAAI,CAAC;qBAChB,IAAI,CAAC,MAAM,CAAC,EAAE;oBACd,GAAG,EAAE,CAAC;oBAEN,OAAO,CAAC,MAAM,CAAC,CAAC;gBACjB,CAAC,CAAC;qBACD,KAAK,CAAC,GAAG,CAAC,EAAE;oBACZ,GAAG,EAAE,CAAC;oBAEN,MAAM,CAAC,GAAG,CAAC,CAAC;gBACb,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;gBAChB,kDAAkD;YACnD,CAAC,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC;AACH,CAAC;AA9BD,4BA8BC","sourcesContent":["import { window } from 'vscode';\r\nconst runAsync = require('run-async');\r\nconst isFn = require('is-fn');\r\n\r\n// Helper function that will show a progress bar while running a function async\r\nexport default function(func): Function {\r\n\tif (!isFn(func)) {\r\n\t\treturn function() {\r\n\t\t\treturn Promise.resolve(func);\r\n\t\t}\r\n\t}\r\n\r\n\tconst fn = runAsync(func);\r\n\r\n\treturn function(): Promise<any> {\r\n\t\tconst args = Array.prototype.slice.call(arguments);\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tPromise.resolve(window.showQuickPick(new Promise((res, rej) => {\r\n\t\t\t\tfn.apply(fn, args)\r\n\t\t\t\t\t.then(result => {\r\n\t\t\t\t\t\trej();\r\n\r\n\t\t\t\t\t\tresolve(result);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\trej();\r\n\r\n\t\t\t\t\t\treject(err);\r\n\t\t\t\t\t});\r\n\t\t\t}))).catch(err => {\r\n\t\t\t\t// do nothing because the input is always rejected\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n}\r\n"]}